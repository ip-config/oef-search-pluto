[ ca ]
default_ca      = CA_default

[CA_default]
ca_dir          = CERTIFICATE_AUTHORITY
dir             = .
name            = fetch-ca

new_certs_dir   = $dir/newcerts
crl_dir         = $ca_dir/crl
database        = $ca_dir/index.txt

certificate     = $ca_dir/$name.cert
serial          = $ca_dir/serial
crl             = $ca_dir/crl.pem
private_key     = $ca_dir/$name.priv
RANDFILE        = $ca_dir/private/.rand
policy                                  = policy_match
default_md                              = sha256
email_in_dn                             = yes
unique_subject  = yes
default_days    = 365
x509_extensions = usercert_extensions
copy_extensions = copy

[ req ]
distinguished_name     = req_distinguished_name
prompt                 = no
req_extensions         = rootcert_extensions

[v3ext]
basicConstraints=critical,CA:false
nsComment=Foobar

[ req_distinguished_name ]
C                      = GB
ST                     = Cambridgeshire
L                      = Cambridge
OU                     = OEF Search
O                      = Fetch.AI
CN                     = Fetch.AI OEF Search
emailAddress           = info@fetch.ai

# this is the bit used when we make the req to make the root cert
[rootcert_extensions]
basicConstraints=critical,CA:TRUE
nsComment=Generic PKI Certificate Authority
subjectKeyIdentifier=hash

# this is the bit that is used when signing
[usercert_extensions]
basicConstraints=critical,CA:FALSE
subjectKeyIdentifier=hash
nsComment=Generated by Fetch.AI Certificate Authority


[ policy_match ]
countryName                             = optional
stateOrProvinceName                     = optional
organizationName                        = optional
organizationalUnitName                  = optional
localityName                            = optional
commonName                              = supplied
emailAddress                            = supplied
